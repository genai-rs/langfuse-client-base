{
  $schema: 'https://docs.renovatebot.com/renovate-schema.json',
  extends: [
    'config:recommended',
    ':dependencyDashboard',
    ':semanticCommitTypeAll(chore)',
    ':rebaseStalePrs',
    ':prConcurrentLimit10',
  ],
  timezone: 'UTC',
  schedule: [
    'after 2am and before 6am on monday',
  ],
  enabledManagers: [
    'cargo',
    'github-actions',
    'custom.regex',
  ],
  branchPrefix: 'automated/renovate/',
  labels: [
    'dependencies',
    'automated',
  ],
  commitMessagePrefix: 'chore(deps):',
  prBodyTemplate: 'This PR updates dependencies. See the [Dependency Dashboard](../../issues) for details.',
  rangeStrategy: 'auto',
  ignorePaths: [
    'src/**/*.rs',
    'docs/**',
  ],
  customManagers: [
    {
      customType: 'regex',
      description: 'Update OpenAPI Generator Docker tag',
      managerFilePatterns: [
        '/^scripts/generate-openapi-client\\.sh$/',
        '/^openapitools\\.json$/',
      ],
      matchStrings: [
        'OPENAPI_GENERATOR_VERSION="\\${OPENAPI_GENERATOR_VERSION:-(?<currentValue>[\\d\\.]+)}"',
        '"version":\\s*"(?<currentValue>[\\d\\.]+)"',
      ],
      datasourceTemplate: 'docker',
      depNameTemplate: 'openapitools/openapi-generator-cli',
      versioningTemplate: 'docker',
    },
  ],
  packageRules: [
    {
      matchCategories: [
        'rust',
      ],
      enabled: true,
      rangeStrategy: 'update-lockfile',
    },
    {
      description: 'Group all Rust patch updates',
      matchManagers: [
        'cargo',
      ],
      matchUpdateTypes: [
        'patch',
      ],
      groupName: 'rust patch updates',
      automerge: true,
    },
    {
      description: 'Group all Rust minor updates',
      matchManagers: [
        'cargo',
      ],
      matchUpdateTypes: [
        'minor',
      ],
      groupName: 'rust minor updates',
      automerge: true,
    },
    {
      description: 'Rust major updates - require manual review',
      matchManagers: [
        'cargo',
      ],
      matchUpdateTypes: [
        'major',
      ],
      labels: [
        'dependencies',
        'breaking',
      ],
      automerge: false,
    },
    {
      description: 'Group all GitHub Actions updates',
      matchManagers: [
        'github-actions',
      ],
      groupName: 'github-actions',
      automerge: true,
    },
    {
      description: 'Security updates - merge immediately',
      matchUpdateTypes: [
        'security',
      ],
      labels: [
        'security',
        'dependencies',
      ],
      automerge: true,
      prPriority: 10,
      schedule: [
        'at any time',
      ],
      minimumReleaseAge: '0 days',
    },
    {
      description: 'Core dependencies - manual review required',
      matchPackageNames: [
        'serde',
        'reqwest',
        'tokio',
      ],
      labels: [
        'dependencies',
        'core',
      ],
      automerge: false,
      assignees: [
        'timvw',
      ],
    },
    {
      description: 'Dev dependencies - auto-merge all',
      matchDepTypes: [
        'devDependencies',
      ],
      automerge: true,
      labels: [
        'dependencies',
        'dev',
      ],
    },
    {
      description: 'OpenAPI Generator updates - manual review',
      matchPackageNames: [
        'openapitools/openapi-generator-cli',
      ],
      labels: [
        'dependencies',
        'openapi-generator',
      ],
      automerge: false,
      assignees: [
        'timvw',
      ],
      schedule: [
        'after 2am and before 6am on monday',
      ],
      prBodyNotes: [
        '⚠️ **OpenAPI Generator Update**',
        'This updates the OpenAPI Generator version used to generate the client code.',
        'After merging, you may need to regenerate the client with:',
        '```bash',
        './scripts/generate-openapi-client.sh',
        '```',
      ],
    },
  ],
  vulnerabilityAlerts: {
    enabled: true,
    labels: [
      'security',
    ],
    assignees: [
      'timvw',
    ],
  },
}
